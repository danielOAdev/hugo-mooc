<script type="importmap">
  {
    "imports": {
      "@popperjs/core": "../popperjs/core/dist/esm/popper.js"
  }
}
</script>

{{/*  {{- with resources.Get "/js/importmap.json" }}
<script type="importmap">
  {{ .Content | safeHTML }}
  {{ urls.RelRef $ "js/popperjs/core/dist/esm/popper.js"}}
</script>
{{- end }}  */}}

{{/*
  Como não estamos usando "js.Build", temos que publicar manualmente módulos importados.
*/}}
{{- range resources.Match "js/**" }}
  {{ .Publish }}
{{- end }}

{{/*
  Vigi Barrel module
*/}}
{{- with resources.Get "js/index.mjs" }}
  <script type="module" src="{{ .RelPermalink }}"></script>
  {{- if eq hugo.Environment "development" }}
    {{/*  Adiciona exportações ao escopo global  */}}
    <script async>import('{{ .RelPermalink }}').then(vigi => {Object.assign(globalThis, vigi)});</script>
  {{- end }}
{{- end }}