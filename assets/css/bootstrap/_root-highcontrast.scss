@include color-mode(highcontrast) {
  color-scheme: dark;

  --#{$prefix}body-color: #{$body-color-highcontrast};
  --#{$prefix}body-color-rgb: #{to-rgb($body-color-highcontrast)};
  --#{$prefix}body-bg: #{$body-bg-highcontrast};
  --#{$prefix}body-bg-rgb: #{to-rgb($body-bg-highcontrast)};

  --#{$prefix}emphasis-color: #{$body-emphasis-color-highcontrast};
  --#{$prefix}emphasis-color-rgb: #{to-rgb($body-emphasis-color-highcontrast)};

  --#{$prefix}secondary-color: #{$body-secondary-color-highcontrast};
  --#{$prefix}secondary-color-rgb: #{to-rgb($body-secondary-color-highcontrast)};
  --#{$prefix}secondary-bg: #{$body-secondary-bg-highcontrast};
  --#{$prefix}secondary-bg-rgb: #{to-rgb($body-secondary-bg-highcontrast)};

  --#{$prefix}tertiary-color: #{$body-tertiary-color-highcontrast};
  --#{$prefix}tertiary-color-rgb: #{to-rgb($body-tertiary-color-highcontrast)};
  --#{$prefix}tertiary-bg: #{$body-tertiary-bg-highcontrast};
  --#{$prefix}tertiary-bg-rgb: #{to-rgb($body-tertiary-bg-highcontrast)};

  --#{$prefix}heading-color: #{$headings-color-highcontrast};

  --#{$prefix}link-color: #{$link-color-highcontrast};
  --#{$prefix}link-hover-color: #{$link-hover-color-highcontrast};
  --#{$prefix}link-color-rgb: #{to-rgb($link-color-highcontrast)};
  --#{$prefix}link-hover-color-rgb: #{to-rgb($link-hover-color-highcontrast)};

  --#{$prefix}code-color: #{$code-color-highcontrast};
  --#{$prefix}highlight-color: #{$mark-color-highcontrast};
  --#{$prefix}highlight-bg: #{$mark-bg-highcontrast};

  --#{$prefix}border-color: #{$border-color-highcontrast};
  --#{$prefix}border-color-translucent: #{$border-color-translucent-highcontrast};

  --#{$prefix}form-valid-color: #{$form-valid-color-highcontrast};
  --#{$prefix}form-valid-border-color: #{$form-valid-border-color-highcontrast};
  --#{$prefix}form-invalid-color: #{$form-invalid-color-highcontrast};
  --#{$prefix}form-invalid-border-color: #{$form-invalid-border-color-highcontrast};

  @each $color, $value in $theme-colors {
    --#{$prefix}#{$color}-rgb: #{to-rgb($primary-highcontrast)};
    --#{$prefix}#{$color}-text: #{$primary-highcontrast};
    --#{$prefix}#{$color}-text-emphasis: #{$primary-highcontrast};
    --#{$prefix}#{$color}-bg-subtle: #{$secondary-highcontrast};
    --#{$prefix}#{$color}-border-subtle: #{$primary-highcontrast};

    .btn-#{$color} {
      @include button-variant(
        $primary-highcontrast,
        $secondary-highcontrast,
        $hover-background: tint-color($primary-highcontrast, $btn-hover-bg-tint-amount),
        $hover-border: tint-color($primary-highcontrast, $btn-hover-border-tint-amount),
        $active-background: tint-color($primary-highcontrast, $btn-active-bg-tint-amount),
        $active-border: tint-color($primary-highcontrast, $btn-active-border-tint-amount)
      );
    }

    .btn-outline-#{$color} {
      @include button-outline-variant($primary-highcontrast);
    }

    .text-bg-#{$color} {
      color: color-contrast($primary-highcontrast) if($enable-important-utilities, !important, null);
    }
  }

  .badge {
    --#{$prefix}badge-color: #{$secondary-highcontrast};
  }

  .nav-pills {
    --#{$prefix}nav-pills-link-active-color: #{$secondary-highcontrast};
    --#{$prefix}nav-pills-link-active-bg: #{$primary-highcontrast};
  }

  .pagination {
    --#{$prefix}pagination-active-color: #{$secondary-highcontrast};
    --#{$prefix}pagination-active-bg: #{$primary-highcontrast};
    --#{$prefix}pagination-active-border-color: #{$primary-highcontrast};
  }

  .text-bg-dark, .bg-dark {
    color: #{$primary-highcontrast} if($enable-important-utilities, !important, null);
    background-color: RGBA(#{to-rgb($secondary-highcontrast)}, var(--#{$prefix}bg-opacity, 1)) if($enable-important-utilities, !important, null);
  }

  .form-check-input {
    &:checked {
      &[type="checkbox"] {
        @if $enable-gradients {
          --#{$prefix}form-check-bg-image: #{escape-svg($form-check-input-checked-bg-image-highcontrast)}, var(--#{$prefix}gradient);
        } @else {
          --#{$prefix}form-check-bg-image: #{escape-svg($form-check-input-checked-bg-image-highcontrast)};
        }
      }

      &[type="radio"] {
        @if $enable-gradients {
          --#{$prefix}form-check-bg-image: #{escape-svg($form-check-radio-checked-bg-image-highcontrast)}, var(--#{$prefix}gradient);
        } @else {
          --#{$prefix}form-check-bg-image: #{escape-svg($form-check-radio-checked-bg-image-highcontrast)};
        }
      }
    }

    &[type="checkbox"]:indeterminate {
      @if $enable-gradients {
        --#{$prefix}form-check-bg-image: #{escape-svg($form-check-input-indeterminate-bg-image-highcontrast)}, var(--#{$prefix}gradient);
      } @else {
        --#{$prefix}form-check-bg-image: #{escape-svg($form-check-input-indeterminate-bg-image-highcontrast)};
      }
    }
  }

  .form-select {
    --#{$prefix}form-select-bg-img: #{escape-svg($form-select-indicator-highcontrast)};
  }

  .form-switch {
    .form-check-input {
      &:focus {
        --#{$prefix}form-switch-bg: #{escape-svg($form-switch-focus-bg-image-highcontrast)};
      }
      &:checked {
        background-position: $form-switch-checked-bg-position;

        @if $enable-gradients {
          --#{$prefix}form-switch-bg: #{escape-svg($form-switch-checked-bg-image-highcontrast)}, var(--#{$prefix}gradient);
        } @else {
          --#{$prefix}form-switch-bg: #{escape-svg($form-switch-checked-bg-image-highcontrast)};
        }
      }
    }
  }

  .form-switch .form-check-input:not(:checked):not(:focus) {
    --#{$prefix}form-switch-bg: #{escape-svg($form-switch-bg-image-highcontrast)};
  }

  --#{$prefix}dropdown-link-active-bg: #{$primary-highcontrast};
  --#{$prefix}list-group-active-bg: #{$primary-highcontrast};
  --#{$prefix}nav-pills-link-active-bg: #{$primary-highcontrast};
  --#{$prefix}pagination-active-bg: #{$primary-highcontrast};
  --#{$prefix}pagination-active-border-color: #{$primary-highcontrast};

  .form-control:focus {
      border-color: $primary-highcontrast;
  }

  .form-check-input {
    &:checked {
      background-color: $primary-highcontrast;
    }
    &[type="checkbox"]:indeterminate {
      background-color: $primary-highcontrast;
    }
  }

  .form-range {
    &::-webkit-slider-thumb, &::-moz-range-thumb {
      @include gradient-bg($primary-highcontrast);
      &:active {
        @include gradient-bg($primary-highcontrast);
      }
    }

    &:disabled {
      &::-webkit-slider-thumb {
        background-color: shade-color($primary-highcontrast, 50%);
      }
      &::-moz-range-thumb { 
        background-color: shade-color($primary-highcontrast, 50%);
      }
    }
  }
}